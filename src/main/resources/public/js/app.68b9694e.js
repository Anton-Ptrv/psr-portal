(function(e){function t(t){for(var r,n,o=t[0],l=t[1],c=t[2],u=0,v=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&v.push(s[n][0]),s[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(v.length)v.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(r=!1)}r&&(i.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},s={app:0},i=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},4589:function(e,t,a){"use strict";var r=a("efed"),s=a.n(r);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view")],1)},i=[],n={name:"App",components:{},data:function(){return{}}},o=n,l=a("2877"),c=a("6544"),d=a.n(c),u=a("7496"),v=Object(l["a"])(o,s,i,!1,null,null,null),p=v.exports;d()(v,{VApp:u["a"]});var m=a("f309");r["a"].use(m["a"]);var b=new m["a"]({}),f=(a("d1e78"),a("b0c0"),a("8c4f")),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"fill-height"},[a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.wait,callback:function(t){e.wait=t},expression:"wait"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Пожалуйста, подождите... "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"5",lg:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",{attrs:{dense:""}},[e._v("Вход в систему")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Логин",name:"login",value:e.username,type:"text",rules:[e.rules.validationUsername]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Пароль",name:"password",value:e.password,type:"password",rules:[e.rules.validationPassword]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",disabled:e.disBtn},on:{click:e.doLogin}},[e._v("Войти")])],1)],1)],1)],1)],1)},g=[],x="/psr/api",_={url:{psrList:x+"/psr",psrDataList:x+"/psr-data",psrStateList:x+"/psr-state",psrLeaderList:x+"/users",psrRegistrationList:x+"/psr-list-registration",psrClassficationList:x+"/classification",psrVolunteerStatus:x+"/volunteer-status",psrVolunteer:x+"/volunteers",notification:x+"/notification",login:"/login",logout:"/logout"}},k={name:"LoginForm",data:function(){return{rules:{validationUsername:function(e){return e?e.length>50?"Логин не должен превышать больше 50 символов":0!=e.length||"Логин не должен быть пустым!":"Логин не должен быть пустым!"},validationPassword:function(e){return e?0==e.length?"Пароль не должен быть пустым!":!(e.length>50)||"Пароль не должен превышать больше 50 символов!":"Логин не должен быть пустым!"}},username:null,password:null,wait:!1}},computed:{disBtn:function(){return!this.username||!this.password}},methods:{doLogin:function(){this.username&&this.password&&(this.wait=!0,this.axios.post(_.url.login,{login:this.username,password:this.password}).then(function(e){console.log(e),this.$router.push("account"),this.wait=!1}.bind(this)).catch(function(e){this.wait=!1,console.log(e)}.bind(this)))}}},D=k,V=a("8336"),S=a("b0af"),L=a("99d9"),w=a("62ad"),C=a("a523"),T=a("169a"),P=a("4bd4"),y=a("8e36"),R=a("0fd9"),I=a("2fa4"),$=a("8654"),M=a("71d9"),j=a("2a7f"),O=Object(l["a"])(D,h,g,!1,null,null,null),F=O.exports;d()(O,{VBtn:V["a"],VCard:S["a"],VCardActions:L["a"],VCardText:L["c"],VCol:w["a"],VContainer:C["a"],VDialog:T["a"],VForm:P["a"],VProgressLinear:y["a"],VRow:R["a"],VSpacer:I["a"],VTextField:$["a"],VToolbar:M["a"],VToolbarTitle:j["a"]});var A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app-bar",{attrs:{color:"primary",app:"","clipped-left":""}},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Система управления поисковыми группами")]),a("v-spacer"),a("v-icon",{on:{click:e.exitAppHandler}},[e._v("exit_to_app")])],1)],1),a("v-content",{attrs:{app:""}},[a("v-container",{attrs:{fluid:""}},[a("ListPSR")],1)],1),a("v-footer",{attrs:{app:""}},[a("span",[e._v("© "+e._s((new Date).getFullYear()))]),a("v-spacer"),a("v-checkbox",{attrs:{dense:"",label:"Включить АвтоОбновления"},on:{click:e.autoUpdateHandler},model:{value:e.autoUpdate,callback:function(t){e.autoUpdate=t},expression:"autoUpdate"}})],1)],1)},H=[],U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{fullscreen:!0},model:{value:e.addCardPSR_isVisible,callback:function(t){e.addCardPSR_isVisible=t},expression:"addCardPSR_isVisible"}},[e.addCardPSR_isVisible?a("addCardPSR",{on:{closeCardPSR:e.addCardPSRHandler}}):e._e()],1),a("v-dialog",{attrs:{fullscreen:!0},model:{value:e.editCardPSR_isVisible,callback:function(t){e.editCardPSR_isVisible=t},expression:"editCardPSR_isVisible"}},[e.editCardPSR_isVisible?a("editCardPSR",{attrs:{cardProps:e.cardProps},on:{closeCardPSR:e.editCardPSRHandler}}):e._e()],1),a("v-dialog",{attrs:{fullscreen:!0},model:{value:e.RegistrationList_isVisible,callback:function(t){e.RegistrationList_isVisible=t},expression:"RegistrationList_isVisible"}},[e.RegistrationList_isVisible?a("RegistrationList",{attrs:{cardProps:e.cardProps.psr.id},on:{closeRegistrationList:e.RegistrationListHandler}}):e._e()],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.psrMembers},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Cписок спасательных работ")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.addCardPSRHandler}},[e._v("Создать новый ПСР")])],1)]},proxy:!0},{key:"item.id",fn:function(t){var r=t.item;return[a("span",[e._v(" "+e._s(r.psr.id))])]}},{key:"item.name",fn:function(t){var r=t.item;return[a("span",[e._v(" "+e._s(r.psr.name))])]}},{key:"item.startDate",fn:function(t){var r=t.item;return[a("span",[e._v(" "+e._s(r.psr.startDate))])]}},{key:"item.endDate",fn:function(t){var r=t.item;return[a("span",[e._v(" "+e._s(r.psr.endDate))])]}},{key:"item.psrState",fn:function(t){var r=t.item;return[a("span",[e._v(" "+e._s(r.psr.psrState.name))])]}},{key:"item.cardPSR",fn:function(t){var r=t.item;return[a("v-btn",{attrs:{color:"primary",rounded:"",small:""},on:{click:function(t){return e.editCardPSRHandler(r)}}},[e._v("Открыть")])]}},{key:"item.registrList",fn:function(t){var r=t.item;return[a("v-btn",{attrs:{color:"orange",rounded:"",small:""},on:{click:function(t){return e.RegistrationListHandler(r)}}},[e._v("Открыть")])]}},{key:"no-data-text",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])})],1)},E=[],B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-snackbar",{attrs:{color:"success",timeout:2e3,top:!0},model:{value:e.success_snackbar,callback:function(t){e.success_snackbar=t},expression:"success_snackbar"}},[e._v(e._s("Сохранено"))]),a("v-snackbar",{attrs:{color:"pink darken-1",timeout:2e3,top:!0,"multi-line":!0},model:{value:e.error_snackbar,callback:function(t){e.error_snackbar=t},expression:"error_snackbar"}},[e._v(" "+e._s("Ошибка сохранения !")+" "+e._s(e.errorMsg)+" ")]),a("v-card-title",[a("v-container",[a("v-row",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),a("v-spacer"),a("v-icon",{on:{click:e.close}},[e._v("close")])],1)],1)],1),a("v-card-subtitle",[a("v-container",[a("v-row",[a("span",[e._v(e._s(e.cardData.psr.startDate))])])],1)],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-text-field",{attrs:{label:"Имя",value:e.cardData.psr.name},model:{value:e.cardData.psr.name,callback:function(t){e.$set(e.cardData.psr,"name",t)},expression:"cardData.psr.name"}})],1),a("v-row",[a("v-combobox",{attrs:{value:e.cardData.psrLeader.login,clearable:!0,"item-value":"login","item-text":"fio",items:e.psrLeaderList,outlined:"",label:"Координатор"},model:{value:e.cardData.psrLeader,callback:function(t){e.$set(e.cardData,"psrLeader",t)},expression:"cardData.psrLeader"}})],1),a("v-row",[a("v-combobox",{attrs:{value:e.cardData.psrRegisteredUser.login,clearable:!0,"item-value":"login","item-text":"fio",items:e.psrLeaderList,outlined:"",label:"Регистратор"},model:{value:e.cardData.psrRegisteredUser,callback:function(t){e.$set(e.cardData,"psrRegisteredUser",t)},expression:"cardData.psrRegisteredUser"}})],1),a("v-row",[a("v-text-field",{attrs:{label:"Штаб",value:e.cardData.station},model:{value:e.cardData.station,callback:function(t){e.$set(e.cardData,"station",t)},expression:"cardData.station"}})],1),a("v-row",[a("v-textarea",{attrs:{label:"Первичная информация",value:e.cardData.content},model:{value:e.cardData.content,callback:function(t){e.$set(e.cardData,"content",t)},expression:"cardData.content"}})],1),a("v-row",[a("v-textarea",{attrs:{label:"Основная информация",value:e.cardData.objectInfo},model:{value:e.cardData.objectInfo,callback:function(t){e.$set(e.cardData,"objectInfo",t)},expression:"cardData.objectInfo"}})],1),a("v-row",[a("v-combobox",{attrs:{label:"Статус","item-text":"name","item-value":"id",value:e.cardData.psr.psrState.id,items:e.psrStateList},model:{value:e.cardData.psr.psrState,callback:function(t){e.$set(e.cardData.psr,"psrState",t)},expression:"cardData.psr.psrState"}})],1),a("v-row",[a("v-file-input",{attrs:{label:"Прикрепить ориентировку"}})],1)],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Пожалуйста, подождите... "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange",dense:""},on:{click:e.Save}},[e._v("Сохранить")]),a("v-spacer")],1)],1)},N=[],z={props:["cardProps"],data:function(){return{cardData:this.cardProps,dialog:!1,formTitle:"Карточка ПСР",psrStateList:[],psrLeaderList:[],success_snackbar:!1,error_snackbar:!1,errorMsg:""}},created:function(){this.init(),this.loadPsrStateList(),this.loadPsrLeaderList()},methods:{init:function(){console.log(this.cardData)},loadPsrStateList:function(){this.$http.get(_.url.psrStateList).then(function(e){console.log(e),this.psrStateList=e.data}.bind(this)).catch((function(e){console.log(e)}))},loadPsrLeaderList:function(){this.$http.get(_.url.psrLeaderList).then(function(e){this.psrLeaderList=e.data||[]}.bind(this)).catch((function(e){console.log(e)}))},Save:function(){this.dialog=!0,this.$http.put(_.url.psrDataList+"/"+this.cardData.id,this.cardData).then(function(e){this.dialog=!1,this.success_snackbar=!0,console.log(e)}.bind(this)).catch(function(e){this.dialog=!1,this.errorMsg=e,this.error_snackbar=!0,console.log(e)}.bind(this))},close:function(){this.$emit("closeCardPSR")}}},K=z,J=a("2b5d"),G=a("23a7"),Y=a("132d"),q=a("2db4"),Q=a("a844"),W=Object(l["a"])(K,B,N,!1,null,null,null),X=W.exports;d()(W,{VBtn:V["a"],VCard:S["a"],VCardActions:L["a"],VCardSubtitle:L["b"],VCardText:L["c"],VCardTitle:L["d"],VCombobox:J["a"],VContainer:C["a"],VDialog:T["a"],VFileInput:G["a"],VIcon:Y["a"],VProgressLinear:y["a"],VRow:R["a"],VSnackbar:q["a"],VSpacer:I["a"],VTextField:$["a"],VTextarea:Q["a"]});var Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-snackbar",{attrs:{color:"success",timeout:2e3,top:!0},model:{value:e.success_snackbar,callback:function(t){e.success_snackbar=t},expression:"success_snackbar"}},[e._v(e._s("Сохранено"))]),a("v-snackbar",{attrs:{color:"pink darken-1",timeout:2e3,top:!0,"multi-line":!0},model:{value:e.error_snackbar,callback:function(t){e.error_snackbar=t},expression:"error_snackbar"}},[e._v(" "+e._s("Ошибка сохранения !")+" "+e._s(e.errorMsg)+" ")]),a("v-card-title",[a("v-container",[a("v-row",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),a("v-spacer"),a("v-icon",{on:{click:e.close}},[e._v("close")])],1)],1)],1),a("v-card-subtitle",[a("v-container",[a("v-row",[a("span",[e._v(e._s(e.cardData.psr.startDate=(new Date).toISOString().substr(0,10)))])])],1)],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-text-field",{attrs:{label:"Имя",value:e.cardData.psr.name},model:{value:e.cardData.psr.name,callback:function(t){e.$set(e.cardData.psr,"name",t)},expression:"cardData.psr.name"}})],1),a("v-row",[a("v-combobox",{attrs:{clearable:!0,"item-text":"fio","item-value":"login",items:e.psrLeaderList,outlined:"",label:"Координатор"},model:{value:e.cardData.psrLeader,callback:function(t){e.$set(e.cardData,"psrLeader",t)},expression:"cardData.psrLeader"}})],1),a("v-row",[a("v-combobox",{attrs:{clearable:!0,"item-text":"fio","item-value":"login",items:e.psrLeaderList,outlined:"",label:"Регистратор"},model:{value:e.cardData.psrRegisteredUser,callback:function(t){e.$set(e.cardData,"psrRegisteredUser",t)},expression:"cardData.psrRegisteredUser"}})],1),a("v-row"),a("v-row",[a("v-text-field",{attrs:{label:"Штаб",value:e.cardData.station},model:{value:e.cardData.station,callback:function(t){e.$set(e.cardData,"station",t)},expression:"cardData.station"}})],1),a("v-row",[a("v-textarea",{attrs:{label:"Первичная информация",value:e.cardData.content},model:{value:e.cardData.content,callback:function(t){e.$set(e.cardData,"content",t)},expression:"cardData.content"}})],1),a("v-row",[a("v-textarea",{attrs:{label:"Основная информация",value:e.cardData.objectInfo},model:{value:e.cardData.objectInfo,callback:function(t){e.$set(e.cardData,"objectInfo",t)},expression:"cardData.objectInfo"}})],1),a("v-row",[a("v-combobox",{attrs:{label:"Статус","item-text":"name","item-value":"id",value:e.cardData.psr.psrState.id,items:e.psrStateList},model:{value:e.cardData.psr.psrState,callback:function(t){e.$set(e.cardData.psr,"psrState",t)},expression:"cardData.psr.psrState"}})],1),a("v-row",[a("v-file-input",{attrs:{label:"Прикрепить ориентировку"}})],1)],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Пожалуйста, подождите... "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"orange",dense:""},on:{click:e.SaveHandler}},[e._v("Сохранить")]),a("v-spacer")],1)],1)},ee=[],te={data:function(){return{psrStateList:[],psrLeaderList:[],dialog:!1,success_snackbar:!1,error_snackbar:!1,errorMsg:"",formTitle:"Создание новой ПСР",cardData:{id:"",psr:{id:"",name:"",startDate:"",endDate:"",psrState:{id:"",name:""},comment:""},station:"",psrLeader:{login:"",fio:"",password:""},psrRegisteredUser:{login:"",fio:""},objectInfo:"",content:"",photo:""}}},created:function(){this.init()},methods:{init:function(){this.loadPsrStateList(),this.loadPsrLeaderList()},SaveHandler:function(){this.dialog=!0,this.axios.post(_.url.psrDataList,this.cardData).then(function(e){this.dialog=!1,this.success_snackbar=!0,console.log(e)}.bind(this)).catch(function(e){this.dialog=!1,this.errorMsg=e,this.error_snackbar=!0,console.log(e)}.bind(this))},loadPsrStateList:function(){this.$http.get(_.url.psrStateList).then(function(e){this.psrStateList=e.data}.bind(this)).catch((function(e){console.log(e)}))},loadPsrLeaderList:function(){this.$http.get(_.url.psrLeaderList).then(function(e){this.psrLeaderList=e.data}.bind(this)).catch((function(e){console.log(e)}))},close:function(){this.$emit("closeCardPSR")}}},ae=te,re=Object(l["a"])(ae,Z,ee,!1,null,null,null),se=re.exports;d()(re,{VBtn:V["a"],VCard:S["a"],VCardActions:L["a"],VCardSubtitle:L["b"],VCardText:L["c"],VCardTitle:L["d"],VCombobox:J["a"],VContainer:C["a"],VDialog:T["a"],VFileInput:G["a"],VIcon:Y["a"],VProgressLinear:y["a"],VRow:R["a"],VSnackbar:q["a"],VSpacer:I["a"],VTextField:$["a"],VTextarea:Q["a"]});var ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-dialog",{attrs:{"max-width":"700"},model:{value:e.isActiveAddMemberForm,callback:function(t){e.isActiveAddMemberForm=t},expression:"isActiveAddMemberForm"}},[e.isActiveAddMemberForm?a("addMemberForm",{attrs:{ListPsrId:e.psrID},on:{close:e.closeMemberForm}}):e._e()],1),a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Лист Регистрации")]),a("v-spacer"),a("v-icon",{on:{click:e.closeRegistrationList}},[e._v("close")])],1),a("v-card-subtitle",[a("span",[e._v("Доступные ресурсы")])]),a("v-card-text",[a("v-row",[a("v-col",{staticClass:"d-flex",attrs:{sm:"9",md:"5",cols:"12",xs:"12"}},[a("v-btn",{attrs:{color:"blue",dense:"",dark:""},on:{click:e.showMemberForm}},[e._v("Записать участника")]),a("v-spacer"),a("v-select",{attrs:{dense:"",outlined:"","item-text":"name","item-value":"id",disabled:e.stateDisable,label:"Изменить статус",items:e.statusStore},on:{change:e.changeVolunteerStatus}}),a("v-spacer")],1)],1),a("v-spacer"),a("v-row",[a("v-data-table",{attrs:{dense:"",headers:e.headers,items:e.members,"mobile-breakpoint":100,"disable-filtering":!0,"disable-sort":!0,"show-select":!0,"hide-default-footer":!0,"disable-pagination":!0},on:{input:e.ItemSelectedHandler},scopedSlots:e._u([{key:"item.id",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(r.volunteer.id))])]}},{key:"item.fio",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(r.volunteer.fio))])]}},{key:"item.volunteerStatus",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(r.volunteerStatus.name))])]}},{key:"item.classification",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(r.volunteer.classification.name))])]}},{key:"item.startVolunteerTime",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(r.startVolunteerTime))])]}},{key:"item.endVolunteerTime",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(r.endVolunteerTime))])]}},{key:"item.shuttleNum",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(r.shuttleNum))])]}}])}),a("br")],1),a("NotificationForm",{attrs:{psrId:e.psrID}})],1)],1)},ne=[],oe=(a("99af"),a("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-snackbar",{attrs:{color:"success",timeout:2e3,top:!0},model:{value:e.success_snackbar,callback:function(t){e.success_snackbar=t},expression:"success_snackbar"}},[e._v(e._s("Сохранено"))]),a("v-snackbar",{attrs:{color:"pink darken-1",timeout:2e3,top:!0,"multi-line":!0},model:{value:e.error_snackbar,callback:function(t){e.error_snackbar=t},expression:"error_snackbar"}},[e._v(" "+e._s("Ошибка сохранения !")+" "+e._s(e.errorMsg)+" ")]),a("v-card-title",[a("v-container",[a("v-row",[a("span",{staticClass:"headline"},[e._v("Новый Участник")]),a("v-spacer"),a("v-icon",{on:{click:e.close}},[e._v("close")])],1)],1)],1),a("v-card-text",[a("v-container",[a("v-row",[a("v-checkbox",{attrs:{label:"Записать существующего"},model:{value:e.memberIsExist,callback:function(t){e.memberIsExist=t},expression:"memberIsExist"}})],1),a("v-row",[e.memberIsExist?a("v-combobox",{attrs:{value:e.memberData.volunteer.fio,items:e.volunteerList,"item-text":"fio","item-value":"id",clearable:!0,outlined:"",label:"Имя, Фамилия"},model:{value:e.memberData.volunteer,callback:function(t){e.$set(e.memberData,"volunteer",t)},expression:"memberData.volunteer"}}):e._e()],1),a("v-row",[e.memberIsExist?e._e():a("v-text-field",{attrs:{label:"Имя, Фамилия"},model:{value:e.memberData.volunteer.fio,callback:function(t){e.$set(e.memberData.volunteer,"fio",t)},expression:"memberData.volunteer.fio"}})],1),a("v-row",[e.memberIsExist?e._e():a("v-radio-group",{attrs:{row:!0},model:{value:e.memberData.volunteer.sex,callback:function(t){e.$set(e.memberData.volunteer,"sex",t)},expression:"memberData.volunteer.sex"}},[a("v-radio",{attrs:{label:"Мужской",value:!0}}),a("v-radio",{attrs:{label:"Женский",value:!1}})],1)],1),a("v-row",[e.memberIsExist?e._e():a("v-text-field",{attrs:{label:"Телеграм участника"},model:{value:e.memberData.volunteer.login,callback:function(t){e.$set(e.memberData.volunteer,"login",t)},expression:"memberData.volunteer.login"}})],1),a("v-row",[a("v-combobox",{attrs:{items:e.classificationList,"item-text":"name","item-value":"id",clearable:!0,outlined:"",label:"Рейтинг"},model:{value:e.memberData.volunteer.classification,callback:function(t){e.$set(e.memberData.volunteer,"classification",t)},expression:"memberData.volunteer.classification"}})],1),a("v-row",[e.memberIsExist?e._e():a("v-text-field",{attrs:{label:"Телефон"},model:{value:e.memberData.volunteer.phone,callback:function(t){e.$set(e.memberData.volunteer,"phone",t)},expression:"memberData.volunteer.phone"}})],1),a("v-row",[a("v-text-field",{attrs:{label:"Наличие Авто"},model:{value:e.memberData.shuttleNum,callback:function(t){e.$set(e.memberData,"shuttleNum",t)},expression:"memberData.shuttleNum"}})],1),a("v-row",[a("v-menu",{ref:"rvp",attrs:{"close-on-content-click":!1,"return-value":e.rvpDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.rvpDate=t},"update:return-value":function(t){e.rvpDate=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"РВП","prepend-icon":"event",readonly:""},model:{value:e.rvpDate,callback:function(t){e.rvpDate=t},expression:"rvpDate"}},r))]}}]),model:{value:e.menurvp,callback:function(t){e.menurvp=t},expression:"menurvp"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.rvpDate,callback:function(t){e.rvpDate=t},expression:"rvpDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menurvp=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.rvp.save(e.rvpDate)}}},[e._v("OK")])],1)],1),a("v-spacer"),a("v-dialog",{ref:"dialog",attrs:{"return-value":e.rvpTime,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.rvpTime=t},"update:return-value":function(t){e.rvpTime=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"Выбрать время","prepend-icon":"access_time",readonly:""},model:{value:e.rvpTime,callback:function(t){e.rvpTime=t},expression:"rvpTime"}},r))]}}]),model:{value:e.rvpTimeModal,callback:function(t){e.rvpTimeModal=t},expression:"rvpTimeModal"}},[e.rvpTimeModal?a("v-time-picker",{attrs:{format:"24hr","full-width":""},model:{value:e.rvpTime,callback:function(t){e.rvpTime=t},expression:"rvpTime"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.rvpTimeModal=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.rvpTime)}}},[e._v("OK")])],1):e._e()],1)],1),a("v-row",[a("v-menu",{ref:"rvo",attrs:{"close-on-content-click":!1,"return-value":e.rvoDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.rvoDate=t},"update:return-value":function(t){e.rvoDate=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"РВО","prepend-icon":"event",readonly:""},model:{value:e.rvoDate,callback:function(t){e.rvoDate=t},expression:"rvoDate"}},r))]}}]),model:{value:e.menurvo,callback:function(t){e.menurvo=t},expression:"menurvo"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.rvoDate,callback:function(t){e.rvoDate=t},expression:"rvoDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menurvo=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.rvo.save(e.rvoDate)}}},[e._v("OK")])],1)],1),a("v-spacer"),a("v-dialog",{ref:"rvoTimedialog",attrs:{"return-value":e.rvoTime,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.rvoTime=t},"update:return-value":function(t){e.rvoTime=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"Выбрать время","prepend-icon":"access_time",readonly:""},model:{value:e.rvoTime,callback:function(t){e.rvoTime=t},expression:"rvoTime"}},r))]}}]),model:{value:e.rvoTimeModal,callback:function(t){e.rvoTimeModal=t},expression:"rvoTimeModal"}},[e.rvoTimeModal?a("v-time-picker",{attrs:{format:"24hr","full-width":""},model:{value:e.rvoTime,callback:function(t){e.rvoTime=t},expression:"rvoTime"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.rvoTimeModal=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.rvoTimedialog.save(e.rvoTime)}}},[e._v("OK")])],1):e._e()],1)],1),a("v-row",[a("v-text-field",{attrs:{label:"Примечание"},model:{value:e.memberData.volunteer.comment,callback:function(t){e.$set(e.memberData.volunteer,"comment",t)},expression:"memberData.volunteer.comment"}})],1)],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Пожалуйста, подождите... "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-card-actions",[a("v-container",[a("v-row",[a("v-spacer"),a("v-btn",{attrs:{color:"blue",dense:"",dark:""},on:{click:e.saveHandler}},[e._v("Записать")]),a("v-spacer")],1)],1)],1)],1)}),le=[],ce={props:["ListPsrId"],data:function(){return{date:(new Date).toISOString().substr(0,10),menurvp:!1,menurvo:!1,psrId:this.ListPsrId,rvpTime:"",rvpDate:"",rvpTimeModal:!1,rvoTime:"",rvoDate:"",rvoTimeModal:!1,dialog:!1,memberIsExist:!0,classificationList:[],volunteerList:[],success_snackbar:!1,error_snackbar:!1,errorMsg:"",memberData:{shuttleNum:"",psr:{id:null},volunteerStatus:{id:null},volunteer:{comment:"",fio:"",login:"",phone:"",sex:null,classification:{id:null,name:null}}}}},created:function(){this.getClassificationList(),this.getVolunteerList()},watch:{memberIsExist:function(){this.memberData={psr:{id:null},volunteerStatus:{id:null},shuttleNum:"",volunteer:{fio:"",login:"",phone:"",sex:null,classification:{id:null,name:null}}}}},methods:{getClassificationList:function(){this.axios.get(_.url.psrClassficationList).then(function(e){this.classificationList=e.data}.bind(this)).catch(function(e){console.log(e)}.bind(this))},getVolunteerList:function(){this.axios.get(_.url.psrVolunteer).then(function(e){this.volunteerList=e.data}.bind(this)).catch(function(e){console.log(e)}.bind(this))},saveHandler:function(){this.dialog=!0,this.memberData.startVolunteerTime=this.rvpDate+" "+this.rvpTime+":00",this.memberData.endVolunteerTime=this.rvoDate+" "+this.rvoTime+":00",this.memberData.psr.id=this.psrId,this.memberData.volunteerStatus.id=1,this.axios.post(_.url.psrRegistrationList,this.memberData).then(function(){this.success_snackbar=!0,this.dialog=!1,setTimeout(function(){this.close()}.bind(this),2e3)}.bind(this)).catch(function(e){this.error_snackbar=!0,this.dialog=!1,this.errorMsg=e,console.log(e)}.bind(this))},close:function(){this.$emit("close")}}},de=ce,ue=a("ac7c"),ve=a("2e4b"),pe=a("e449"),me=a("67b6"),be=a("43a6"),fe=a("c964"),he=Object(l["a"])(de,oe,le,!1,null,null,null),ge=he.exports;d()(he,{VBtn:V["a"],VCard:S["a"],VCardActions:L["a"],VCardText:L["c"],VCardTitle:L["d"],VCheckbox:ue["a"],VCombobox:J["a"],VContainer:C["a"],VDatePicker:ve["a"],VDialog:T["a"],VIcon:Y["a"],VMenu:pe["a"],VProgressLinear:y["a"],VRadio:me["a"],VRadioGroup:be["a"],VRow:R["a"],VSnackbar:q["a"],VSpacer:I["a"],VTextField:$["a"],VTimePicker:fe["a"]});var xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),a("br"),a("hr"),a("v-row",[a("v-col",{staticClass:"d-flex",attrs:{sm:"6",md:"5",cols:"12",xs:"12",lg:"5"}},[a("v-data-table",{attrs:{dense:"",headers:e.headers,items:e.volunteers,"mobile-breakpoint":100,"disable-filtering":!0,"disable-sort":!0,"show-select":!0,"hide-default-footer":!0,"disable-pagination":!0},on:{input:e.ItemSelectedHandler},scopedSlots:e._u([{key:"item.classification",fn:function(t){var r=t.item;return[a("span",[e._v(e._s(r.classification.name))])]}}])})],1),a("v-col",{staticClass:"d-flex",attrs:{sm:"6",md:"7",cols:"12",xs:"12",lg:"7"}},[a("div",{staticStyle:{width:"100%"}},[a("v-checkbox",{attrs:{label:"Регистрация ПСР"},model:{value:e.regPsrCheckbox,callback:function(t){e.regPsrCheckbox=t},expression:"regPsrCheckbox"}}),a("v-textarea",{attrs:{label:"Текст оповещения",height:120,value:e.message},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),a("v-btn",{attrs:{color:"orange",dense:"",disabled:!Boolean(e.message)||e.sendBtn},on:{click:e.sendNotification}},[e._v(" "+e._s("Отправить оповещение")+" ")])],1)])],1),a("v-snackbar",{attrs:{color:"success",timeout:2e3,top:!0},model:{value:e.success_snackbar,callback:function(t){e.success_snackbar=t},expression:"success_snackbar"}},[e._v(e._s("Отправлено"))]),a("v-snackbar",{attrs:{color:"pink darken-1",timeout:2e3,top:!0,"multi-line":!0},model:{value:e.error_snackbar,callback:function(t){e.error_snackbar=t},expression:"error_snackbar"}},[e._v(" "+e._s("Ошибка отправки !")+" "+e._s(e.errorMsg)+" ")])],1)},_e=[],ke={props:["psrId"],data:function(){return{volunteers:[],selectedIds:[],success_snackbar:!1,error_snackbar:!1,errorMsg:"",message:"",sendBtn:!0,regPsrCheckbox:!1,psrID:this.psrId,headers:[{text:"Участник",value:"fio",sortable:!1},{text:"Номер Телефона",value:"phone",sortable:!1},{text:"Опыт",value:"classification",sortable:!1}]}},created:function(){console.log("created"),this.loadPsrVolunteer(),localStorage.getItem("autoUpdate")&&setInterval(function(){this.volunteers=[],this.loadPsrVolunteer()}.bind(this),5e3)},methods:{init:function(){this.message=""},loadPsrVolunteer:function(){this.axios.get(_.url.psrVolunteer).then(function(e){this.volunteers=this.volunteers.concat(e.data)}.bind(this)).catch(function(e){console.log(e)}.bind(this))},sendNotification:function(e){if(console.log(e),console.log(this.selectedIds),this.message&&this.selectedIds.length>0){var t=this.psrID,a=this.regPsrCheckbox?{ids:this.selectedIds,message:this.message,reply_markup:[{text:"Да",callback_data:"reg_psr_yes_"+t},{text:"Нет",callback_data:"reg_psr_no"}]}:{ids:this.selectedIds,message:this.message};this.axios.post(_.url.notification,a).then(function(){this.init(),this.success_snackbar=!0}.bind(this)).catch(function(e){console.log(e),this.error_snackbar=!0,this.errorMsg=e.message}.bind(this))}},ItemSelectedHandler:function(e){e.length>0?this.sendBtn=!1:this.sendBtn=!0,this.selectedIds=e.map((function(e){return e.id}))}}},De=ke,Ve=a("8fea"),Se=Object(l["a"])(De,xe,_e,!1,null,null,null),Le=Se.exports;d()(Se,{VBtn:V["a"],VCheckbox:ue["a"],VCol:w["a"],VDataTable:Ve["a"],VRow:R["a"],VSnackbar:q["a"],VTextarea:Q["a"]});var we={components:{addMemberForm:ge,NotificationForm:Le},props:["cardProps"],data:function(){return{members:[],isActiveAddMemberForm:!1,selectedIds:[],stateDisable:!0,statusStore:[],psrID:this.cardProps,headers:[{text:"Участник",value:"fio",sortable:!1},{text:"Статус",value:"volunteerStatus",sortable:!1},{text:"А",value:"shuttleNum",sortable:!1},{text:"К",value:"classification",sortable:!1},{text:"РВП",value:"startVolunteerTime",sortable:!1},{text:"РВО",value:"endVolunteerTime",sortable:!1},{text:"Эк",value:"shuttleNum",sortable:!1}]}},created:function(){this.initialize()},methods:{initialize:function(){this.loadRegistrationList(),this.loadVolunteerStatus()},changeVolunteerStatus:function(e){console.log(e),console.log(this.selectedIds),this.axios.put(_.url.psrRegistrationList+"/volunteer-status",{ids:this.selectedIds,volunteerStatus:{id:e}}).then(function(){this.initialize()}.bind(this)).catch(function(e){console.log(e)}.bind(this))},ItemSelectedHandler:function(e){e.length>0?this.stateDisable=!1:this.stateDisable=!0,this.selectedIds=e.map((function(e){return e.volunteer.id}))},loadVolunteerStatus:function(){this.axios.get(_.url.psrVolunteerStatus).then(function(e){this.statusStore=this.statusStore.concat(e.data)}.bind(this)).catch(function(e){console.log(e)}.bind(this))},loadRegistrationList:function(){this.axios.get(_.url.psrRegistrationList+"/psr/"+this.psrID).then(function(e){console.log(e.data),this.members=[],this.members=this.members.concat(e.data)}.bind(this)).catch((function(e){console.log(e)}))},closeRegistrationList:function(){this.$emit("closeRegistrationList")},showMemberForm:function(){this.isActiveAddMemberForm=!0},closeMemberForm:function(){this.isActiveAddMemberForm=!1,this.initialize()}}},Ce=we,Te=a("b974"),Pe=Object(l["a"])(Ce,ie,ne,!1,null,null,null),ye=Pe.exports;d()(Pe,{VBtn:V["a"],VCard:S["a"],VCardSubtitle:L["b"],VCardText:L["c"],VCardTitle:L["d"],VCol:w["a"],VDataTable:Ve["a"],VDialog:T["a"],VIcon:Y["a"],VRow:R["a"],VSelect:Te["a"],VSpacer:I["a"]});var Re={components:{editCardPSR:X,RegistrationList:ye,addCardPSR:se},data:function(){return{addCardPSR_isVisible:!1,editCardPSR_isVisible:!1,RegistrationList_isVisible:!1,cardProps:{},headers:[{text:"Номер ПСР",value:"id",sortable:!1},{text:"Населенный пункт",value:"name"},{text:"Начало ПСР",value:"startDate"},{text:"Окончание ПСР",value:"endDate"},{text:"Статус",value:"psrState"},{text:"Карточка ПСР",value:"cardPSR",sortable:!1},{text:"Лист Регистрации",value:"registrList",sortable:!1}],psrMembers:[]}},created:function(){this.initialize()},methods:{initialize:function(){this.loadPsrList()},loadPsrList:function(){this.$http.get(_.url.psrDataList).then(function(e){this.psrMembers=e.data}.bind(this)).catch(function(e){console.log(e)}.bind(this))},editCardPSRHandler:function(e){this.cardProps=Object.assign({},e),this.editCardPSR_isVisible?(this.editCardPSR_isVisible=!1,this.initialize()):this.editCardPSR_isVisible=!0},addCardPSRHandler:function(){this.addCardPSR_isVisible?(this.addCardPSR_isVisible=!1,this.initialize()):this.addCardPSR_isVisible=!0},RegistrationListHandler:function(e){this.cardProps=Object.assign({},e),this.RegistrationList_isVisible?this.RegistrationList_isVisible=!1:this.RegistrationList_isVisible=!0}}},Ie=Re,$e=(a("4589"),a("ce7e")),Me=Object(l["a"])(Ie,U,E,!1,null,"8924e526",null),je=Me.exports;d()(Me,{VBtn:V["a"],VDataTable:Ve["a"],VDialog:T["a"],VDivider:$e["a"],VSpacer:I["a"],VToolbar:M["a"],VToolbarTitle:j["a"]});var Oe={data:function(){return{autoUpdate:!1}},components:{ListPSR:je},created:function(){localStorage.removeItem("autoUpdate")},methods:{autoUpdateHandler:function(){localStorage.removeItem("autoUpdate"),this.autoUpdate&&localStorage.setItem("autoUpdate",!0)},exitAppHandler:function(){this.axios.get(_.url.logout).then(function(){this.$router.push("/")}.bind(this)).catch(function(e){console.log(e),this.$router.push("/")}.bind(this))}}},Fe=Oe,Ae=a("40dc"),He=a("a75b"),Ue=a("553a"),Ee=Object(l["a"])(Fe,A,H,!1,null,null,null),Be=Ee.exports;d()(Ee,{VAppBar:Ae["a"],VCheckbox:ue["a"],VContainer:C["a"],VContent:He["a"],VFooter:Ue["a"],VIcon:Y["a"],VSpacer:I["a"],VToolbar:M["a"],VToolbarTitle:j["a"]});var Ne=a("bc3a"),ze=a.n(Ne);r["a"].use(f["a"]);var Ke=ze.a.create(),Je=new f["a"]({mode:"history",routes:[{name:"login",path:"/",component:F},{path:"/account",name:"account",component:Be,beforeEnter:function(e,t,a){Ke.get(_.url.psrList).then((function(t){"account"===e.name&&t.data&&a()})).catch((function(e){403===e.response.status&&a({name:"login"})}))}}]}),Ge=Je,Ye=a("a7fe"),qe=a.n(Ye);r["a"].use(qe.a,ze.a),r["a"].config.productionTip=!1,new r["a"]({router:Ge,vuetify:b,render:function(e){return e(p)}}).$mount("#app")},efed:function(e,t,a){}});
//# sourceMappingURL=app.68b9694e.js.map